8、城市
http://www.freeors.com/bbs/forum.php?mod=viewthread&tid=17217&extra=page%3D4

城市，它在游戏中城是个基本元素。在它之上是阵营，在它之下是城外部队、城内部队和武将。

artifical类封装城市，一个artifical对象表述一个城市。在血缘上，它是unit的派生类。artifical是用于封装建筑物单位，城市是一种特殊建筑物。

为什么要从unit派生？

unit_map定了一个映射（node中定义）：std::pair<map_location, unit>，程序用这个映射进行单位移动、攻击、刷新等一列操作。直接从unit派生，在程序上可以极大减少编写artifical类的代码，在mod编写上几乎直接复用unit的wml规则，以着和unit类似方式实现城市升级、动画等等。

城市做为一种特殊artifical，自然有它特点：

1：没有移动力；
2：can_reside=true；
3：有城内部队（reside_troop），城外部队（field_troop），武将（hero_list）；
4：重载了unit刷新操作：redraw_unit。

代码位置：
kingdom-src\kingdom\kingdom\artifical.hpp