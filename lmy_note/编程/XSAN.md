1、ASAN和HWASAN原理解析
https://linus.blog.csdn.net/article/details/105445409

2、最后的一个难题的访问地址
https://clang.llvm.org/docs/HardwareAssistedAddressSanitizerDesign.html#short-granules
短粒
短颗粒是大小在1到TG-1字节之间的颗粒。短粒的大小存储在影子存储器中通常存储粒标签的位置，而粒的实际标签存储在粒的最后一个字节中。这意味着，为了验证指针标签与内存标签匹配，HWASAN必须检查两种可能性：
指针标签等于影子内存中的内存标签，或者
影子内存标签实际上是一个较短的颗粒大小，正在加载的值在颗粒的边界内，而指针标签等于颗粒的最后一个字节。
1到TG-1之间的指针标签是可能的，并且与其他任何标签一样可能。这意味着内存中的这些标签有两种解释：完整标签解释（指针标签在1到TG-1之间，并且粒子的最后一个字节是普通数据）和短标签解释（存储指针标签的地方）在颗粒中）。
当HWASAN在1和TG-1之间的内存标签附近检测到错误时，它将同时显示内存标签和颗粒的最后一个字节。当前，由用户来消除这两种可能性的歧义。

2、
https://juejin.cn/post/6868067567810904077     // clang之Hardware-assisted AddressSanitizer
短颗粒（Short granules）
短颗粒是尺寸介于1和TG-1字节之间的小颗粒。短颗粒的尺寸存储在影子内存中的短颗粒的标记通常存储的位置，而短颗粒的实际标记存储在其最后一个字节中。这意味着，为了验证一个指针的标记与内存标记是否一致，HWASAN必须要检查两种可能性：
指针标记与影子内存中的内存标记相等，或者
影子内存标记实际上是一个短颗粒的尺寸，加载的值在短颗粒的范围内，并且指针标记与短颗粒的最后一个字节相等。
介于1和TG-1之间的指针标记都是有可能的，且与其他任意标记一样。这意味着，内存中的这些标记有两种解释：全标记解释（指针标记介于1和TG-1之间，且短颗粒的最后一个字节是原数据）和短标记解释（指针标记存储在短颗粒中）。
当HWASAN检测到一个介于1和TG-1之间的内存标记的错误时，它会显示内存标记和短颗粒的最后一个字节。此时，就由用户自己来决定采用哪种方式了。

3、个人理解
如果是短颗粒，在16字节的内存区域中，最后一个字节存储随机值。shawdow中存储可访问长度。